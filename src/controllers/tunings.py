from music21 import pitch

class TuningHandler:
    def __init__(self, source):
        self.source = source
        self.tuning_systems = {
            'diatonic': {
                'Standard Richter': [' 1', ' -1\'', ' -1', ' 1o', ' 2', ' -2\'\'', ' -2\'', ' -2', ' -3\'\'\'', ' -3\'\'', ' -3\'', ' -3', ' 4', ' 4\'', ' -4', ' 4o', ' 5', ' -5', ' 5o', ' 6', ' 6\'', ' -6', ' 6o', ' -7', ' 7', ' -7o', ' -8', ' 8\'', ' 8', ' -9', ' 9\'', ' 9', ' -9o', ' -10', ' 10\'\'', ' 10\'', ' 10', ' -10o'],
                'Paddy Richter': [' 1', ' -1\'', ' -1', ' 2\'', ' 2', ' -2\'\'', ' -2\'', ' -2', ' 3\'', ' 3', ' -3\'', ' -3', ' 4', ' -4\'', ' -4', ' 5\'', ' 5', ' -5', ' 6\'', ' 6', ' -6\'', ' -6', ' -7\'', ' -7', ' 7', ' -8\'', ' -8', ' 8\'', ' 8', ' -9', ' 9\'', ' 9', ' -10\'', ' -10', ' 10\'\'', ' 10\'', ' 10'],
                'Melody Maker': [' 1', ' -1\'', ' -1', ' 1o',' 2', ' -2\'\'',' -2\'', ' -2', ' 2o', ' 3', ' -3\'', ' -3', ' 4', ' -4\'', ' -4', ' 4o', ' 5', ' -5\'', ' -5', ' 6', ' -6\'', ' -6', ' 6o', ' -7', ' 7', ' -7o', ' -8', ' 8\'', ' 8', ' -8o', ' -9', ' 9', ' -9o', ' -10', ' 10\'\'', ' 10\'', ' 10', ' -10o'],
                'Country': [' 1', ' -1\'', ' -1', ' 1o', ' 2', ' -2\'\'', ' -2\'', ' -2', ' -3\'\'\'', ' -3\'\'', ' -3\'', ' -3', ' 4', ' -4\'', ' -4', ' 4o', ' 5', ' -5\'', ' -5', ' 6', ' -6\'', ' -6', ' 6o', ' -7', ' 7', ' -7o', ' -8', ' 8\'', ' 8', ' -9', ' 9\'', ' 9', ' -9o', ' -10', ' 10\'\'', ' 10\'', ' 10', ' -10o'],
                'Natural Minor': [' 1', ' -1\'', ' -1', ' 2', ' -2\'\'\'', ' -2\'\'', ' -2\'', ' -2', ' -3\'\'', ' -3\'', ' -3', ' 3o', ' 4', ' -4\'', ' -4', ' 5', ' -5\'', ' -5', ' 5o', ' 6', ' -6\'', ' -6', ' -7', ' 7\'', ' 7', ' -7o', ' -8', ' 8', ' -8o', ' -9', ' 9\'', ' 9', ' -9o', ' -10', ' 10\'\'', ' 10\'', ' 10', ' -10o'],
                'Wilde Rock': [' 1', ' -1\'', ' -1', ' 1o', ' 2', ' -2\'\'', ' -2\'', ' -2', ' -3\'\'\'', ' -3\'\'', ' -3\'', ' -3', ' 4', ' 4\'', ' -4', ' 4o', ' 5', ' -5', ' 5o', ' 6', ' -6\'\'', ' -6\'', ' -6', ' -7\'\'\'', ' -7\'\'', ' -7\'', ' -7', ' 8', ' 8\'', ' -8', ' 8o', ' 9', ' -9\'\'', ' -9\'', ' -9', ' 9o', ' 10', ' -10\'\'', ' -10\'', ' -10']
            },
            'chromatic': {
                'Solo': ["+1", '+1s', "-1", "-1s", "+2", "-2", "-2s", "+3", "+3s", "-3", "-3s","-4", "+4", "+4s", "-5", "-5s", "+6", "-6", "-6s", "+7", "+7s", "-7", "-7s", "-8", "+8", "+8s", "-9", "-9s", "+10", "-10", "-10s", "+11", "+11s", "-11", "-11s", "-12", "+12", "+12s", "-12", "-12s"],
                'Orchestra': [''],
                'Solo64': [''],
                'Irish': ['']
            }
        }

    def harp_map(self, key, tuning, type):
        harp = {}
        start_pitch = pitch.Pitch(str(key))
        tuning_sys = self.tuning_systems[type].get(tuning, [])

        for note in tuning_sys:
            harp[start_pitch.ps] = note
            start_pitch = pitch.Pitch(start_pitch.ps + 1)

        return harp
    
    def diatonic_harp(self, key, tuning):
        return self.harp_map(key, tuning, 'diatonic')
    
    def chromatic_harp(self, key, tuning):
        return self.harp_map(key, tuning, 'chromatic')
